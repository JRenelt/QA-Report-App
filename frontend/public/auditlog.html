<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FavOrg AuditLog-System</title>
    
    <style>
        /* Custom CSS Variables f√ºr Dark Theme */
        :root {
            --bg-primary: #1a1f2e;
            --bg-secondary: #252b3b;
            --bg-card: #2d3748;
            --text-primary: #e5e7eb;
            --text-secondary: #9ca3af;
            --border-primary: #374151;
            --accent-cyan: #06b6d4;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Audit Log Specific Styles */
        .audit-log-container {
            min-height: 100vh;
            background: var(--bg-primary);
            padding: 16px;
            padding-bottom: 80px; /* Raum f√ºr Footer */
        }

        .audit-log-header {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 16px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 12px;
        }

        .audit-log-content {
            display: flex;
            gap: 16px;
            min-height: calc(100vh - 200px);
        }

        .audit-sidebar {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 8px;
            padding: 16px;
            width: 320px;
            flex-shrink: 0;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
        }

        .audit-main {
            flex: 1;
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 8px;
            padding: 16px;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
        }

        .audit-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-primary);
            padding: 8px 16px;
            display: flex;
            align-items: center;
            gap: 16px;
            z-index: 1000;
            flex-wrap: wrap;
        }

        /* Button Styles */
        .btn {
            padding: 8px 12px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--accent-cyan);
            color: white;
        }

        .btn-primary:hover {
            background: #0891b2;
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-primary);
        }

        .btn-secondary:hover {
            background: var(--border-primary);
        }

        .btn-success {
            background: #059669;
            color: white;
        }

        .btn-danger {
            background: #dc2626;
            color: white;
        }

        .btn-warning {
            background: #d97706;
            color: white;
        }

        .btn-info {
            background: #2563eb;
            color: white;
        }

        .btn-small {
            padding: 4px 8px;
            font-size: 12px;
        }

        /* Category Button */
        .category-btn {
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 8px;
            background: var(--bg-card);
            border: 1px solid var(--border-primary);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            text-align: left;
        }

        .category-btn:hover,
        .category-btn.active {
            background: var(--accent-cyan);
            color: white;
        }

        .category-btn .flex-1 {
            flex: 1;
        }

        /* Test Point Styles */
        .test-point {
            background: var(--bg-card);
            border: 2px solid var(--border-primary);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            transition: all 0.2s;
        }

        .test-point:hover {
            border-color: var(--accent-cyan);
        }

        .test-point-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            margin-bottom: 8px;
        }

        .test-point-actions {
            display: flex;
            align-items: center;
            gap: 4px;
            margin-top: 8px;
        }

        /* Status Badges */
        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
        }

        .status-success {
            background: #059669;
            color: white;
        }

        .status-error {
            background: #dc2626;
            color: white;
        }

        .status-warning {
            background: #d97706;
            color: white;
        }

        .status-info {
            background: #2563eb;
            color: white;
        }

        .status-default {
            background: var(--border-primary);
            color: white;
        }

        /* Input Styles */
        .input {
            background: var(--bg-card);
            border: 1px solid var(--border-primary);
            border-radius: 4px;
            padding: 8px 12px;
            color: var(--text-primary);
            font-size: 14px;
            width: 200px;
        }

        .input:focus {
            outline: none;
            border-color: var(--accent-cyan);
        }

        .input-full {
            width: 100%;
        }

        /* Close Button */
        .close-btn {
            position: fixed;
            top: 16px;
            right: 16px;
            background: #ef4444;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            z-index: 1001;
            font-weight: 500;
        }

        .close-btn:hover {
            background: #dc2626;
        }

        /* Utility Classes */
        .flex {
            display: flex;
        }

        .align-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .gap-8 {
            gap: 8px;
        }

        .gap-12 {
            gap: 12px;
        }

        .mb-0 {
            margin-bottom: 0;
        }

        .mb-8 {
            margin-bottom: 8px;
        }

        .mb-16 {
            margin-bottom: 16px;
        }

        .mt-8 {
            margin-top: 8px;
        }

        .ml-auto {
            margin-left: auto;
        }

        .text-cyan {
            color: var(--accent-cyan);
        }

        .text-secondary {
            color: var(--text-secondary);
        }

        .text-sm {
            font-size: 13px;
        }

        .hidden {
            display: none;
        }

        .note-box {
            background: var(--bg-primary);
            padding: 8px;
            border-radius: 4px;
            margin: 8px 0;
            font-size: 13px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .audit-log-content {
                flex-direction: column;
            }
            
            .audit-sidebar {
                width: 100%;
                max-height: 300px;
            }
            
            .audit-main {
                max-height: calc(100vh - 500px);
            }
            
            .audit-footer {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
                padding: 12px;
            }
            
            .input {
                width: 150px;
            }
        }
    </style>
</head>
<body>
    <div id="audit-log-root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { X, Search, FileText, Trash2, Download, Plus, Info, HelpCircle, Clock, Home } = lucideReact;

        // Toast-Funktionen
        const showSuccess = (message) => {
            if (window.sonner) {
                window.sonner.toast.success(message);
            } else {
                console.log('SUCCESS:', message);
            }
        };

        const showError = (message) => {
            if (window.sonner) {
                window.sonner.toast.error(message);
            } else {
                console.log('ERROR:', message);
            }
        };

        const AuditLogStandalone = () => {
            const [currentCategory, setCurrentCategory] = useState('Allgemeines Design');
            const [viewMode, setViewMode] = useState('bereiche');
            const [newTestName, setNewTestName] = useState('');
            const [compactView, setCompactView] = useState(false);
            const [testReports, setTestReports] = useState([]);
            const [selectedTestPoints, setSelectedTestPoints] = useState([]);
            const [testNotes, setTestNotes] = useState({});
            const [testStatuses, setTestStatuses] = useState({});
            const [editingNote, setEditingNote] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');
            const [filteredTests, setFilteredTests] = useState([]);
            const [statusFilter, setStatusFilter] = useState('');
            const [forceRender, setForceRender] = useState(0);
            const [dynamicTests, setDynamicTests] = useState({});

            // Test-Bereiche f√ºr FavOrg als State
            const [testCategories, setTestCategories] = useState([
                { name: 'Allgemeines Design', icon: 'üé®', tests: 4 },
                { name: 'Header-Bereich', icon: 'üîù', tests: 4 }, 
                { name: 'Sidebar-Bereich', icon: 'üìã', tests: 5 },
                { name: 'Search-Section', icon: 'üîç', tests: 5 },
                { name: 'Main-Content', icon: 'üìÑ', tests: 4 },
                { name: 'Bookmark-Karten', icon: 'üé¥', tests: 6 },
                { name: 'Dialoge & Modals', icon: 'üó®Ô∏è', tests: 5 },
                { name: 'Navigation & Routing', icon: 'üß≠', tests: 3 },
                { name: 'Drag & Drop System', icon: 'üéØ', tests: 5 },
                { name: 'Filter & Sortierung', icon: 'üéõÔ∏è', tests: 4 },
                { name: 'Import/Export', icon: 'üì§', tests: 4 },
                { name: 'Einstellungen', icon: '‚öôÔ∏è', tests: 4 },
                { name: 'Performance & Responsive', icon: '‚ö°', tests: 4 }
            ]);

            // Test-Szenarien pro Bereich
            const predefinedTests = {
                'Allgemeines Design': [
                    { name: '80% UI-Kompaktheit', icon: 'üì±', tooltip: '80% kompakte UI-Darstellung pr√ºfen' },
                    { name: 'Dark Theme', icon: 'üåô', tooltip: 'Dark Theme Konsistenz testen' },
                    { name: 'Responsiveness', icon: 'üìê', tooltip: 'Responsive Layout auf verschiedenen Gr√∂√üen' },
                    { name: 'Typographie', icon: 'üî§', tooltip: 'Typographie und Schriftarten pr√ºfen' }
                ],
                'Header-Bereich': [
                    { name: 'Logo & Titel Platzierung', icon: 'üè∑Ô∏è', tooltip: 'Logo und Titel korrekt positioniert' },
                    { name: 'Navigation Icons', icon: 'üß≠', tooltip: 'Alle Navigation-Icons funktional' },
                    { name: 'Bookmark-Anzahl [X]', icon: 'üî¢', tooltip: 'Bookmark-Counter korrekt angezeigt' },
                    { name: 'Header-Buttons Layout', icon: 'üîò', tooltip: 'Button-Layout im Header pr√ºfen' }
                ],
                'Sidebar-Bereich': [
                    { name: 'Kategorie-Liste', icon: 'üìÇ', tooltip: 'Kategorien korrekt aufgelistet' },
                    { name: 'Drag & Drop Kategorien', icon: 'üéØ', tooltip: 'Kategorie D&D funktional' },
                    { name: 'Resizing Funktionalit√§t', icon: '‚ÜîÔ∏è', tooltip: 'Sidebar-Gr√∂√üen√§nderung' },
                    { name: 'Kategorie-Tooltips', icon: 'üí¨', tooltip: 'Tooltip-Positionierung testen' },
                    { name: 'Unterkategorie-Hierarchie', icon: 'üå≥', tooltip: 'Hierarchische Darstellung pr√ºfen' }
                ],
                'Search-Section': [
                    { name: 'Suchfeld Funktionalit√§t', icon: 'üîç', tooltip: 'Suche in allen Feldern' },
                    { name: 'Escape-Taste Reset', icon: '‚å®Ô∏è', tooltip: 'ESC leert Suchfeld' },
                    { name: 'Gelbe Hervorhebung', icon: 'üü°', tooltip: 'Treffer-Highlighting pr√ºfen' },
                    { name: 'Treffer-Anzeige [X]', icon: 'üìä', tooltip: 'Treffer-Counter korrekt' },
                    { name: 'Live-Search Performance', icon: '‚ö°', tooltip: 'Performance bei Eingabe pr√ºfen' }
                ],
                'Main-Content': [
                    { name: 'Bookmark-Darstellung', icon: 'üé¥', tooltip: 'Bookmark-Karten Layout' },
                    { name: 'Tabellen-Ansicht Toggle', icon: 'üìã', tooltip: 'List/Grid View umschalten' },
                    { name: 'Scroll-Performance', icon: 'üìú', tooltip: 'Scrolling bei vielen Bookmarks' },
                    { name: 'Leere-State Anzeige', icon: 'üì≠', tooltip: 'Anzeige wenn keine Bookmarks' }
                ],
                'Bookmark-Karten': [
                    { name: 'Status-Farb-System', icon: 'üé®', tooltip: 'Farben f√ºr verschiedene Status' },
                    { name: 'Lock/Unlock Buttons', icon: 'üîí', tooltip: 'Sperr-Funktionalit√§t testen' },
                    { name: 'Action-Buttons Layout', icon: 'üîò', tooltip: 'Edit/Delete/Link Button-Layout' },
                    { name: 'Drag-Handles sichtbar', icon: '‚ãÆ‚ãÆ', tooltip: 'Drag-Griffe erkennbar' },
                    { name: 'Hover-States', icon: 'üëÜ', tooltip: 'Hover-Effekte auf Karten' },
                    { name: 'Status-Badge Position', icon: 'üè∑Ô∏è', tooltip: 'Status-Badges korrekt positioniert' }
                ],
                'Dialoge & Modals': [
                    { name: 'Bookmark-Dialog Layout', icon: 'üìù', tooltip: 'Neuer/Edit Bookmark Dialog' },
                    { name: 'Settings-Dialog Tabs', icon: '‚öôÔ∏è', tooltip: 'System-Einstellungen Tabs' },
                    { name: 'Help-System Navigation', icon: '‚ùì', tooltip: 'Hilfe-System Untermen√ºs' },
                    { name: 'Modal Escape-Close', icon: '‚å®Ô∏è', tooltip: 'ESC schlie√üt Dialoge' },
                    { name: 'Dialog-Breiten korrekt', icon: 'üìè', tooltip: 'Dialog-Gr√∂√üen responsive' }
                ],
                'Navigation & Routing': [
                    { name: 'Kategorie-Wechsel', icon: 'üîÑ', tooltip: 'Navigation zwischen Kategorien' },
                    { name: 'URL-Updates', icon: 'üîó', tooltip: 'URL-√Ñnderungen bei Navigation' },
                    { name: 'Browser Back/Forward', icon: '‚¨ÖÔ∏è', tooltip: 'Browser-Navigation funktional' }
                ],
                'Drag & Drop System': [
                    { name: 'Bookmark D&D zwischen Kategorien', icon: 'üéØ', tooltip: 'Bookmark-Verschiebung' },
                    { name: 'Kategorie D&D Hierarchie', icon: 'üå≥', tooltip: 'Kategorie-Hierarchie √§ndern' },
                    { name: 'Visual Feedback DDI', icon: 'üëÅÔ∏è', tooltip: 'Drag-Drop-Indicator sichtbar' },
                    { name: 'Cross-Level Sorting', icon: '‚ÜïÔ∏è', tooltip: 'Zwischen allen Ebenen verschieben' },
                    { name: 'Multi-Selection D&D', icon: 'üé´', tooltip: 'Mehrfach-Auswahl verschieben' }
                ],
                'Filter & Sortierung': [
                    { name: 'Status-Filter Buttons', icon: 'üéõÔ∏è', tooltip: 'TOTE/LOCALHOST/DUPLIKAT Filter' },
                    { name: 'Filter-Counter [X]', icon: 'üî¢', tooltip: 'Counter in Filter-Buttons' },
                    { name: 'Kombinierte Filter', icon: 'üîó', tooltip: 'Mehrere Filter gleichzeitig' },
                    { name: 'Filter-Reset Alle', icon: 'üîÑ', tooltip: 'Alle Filter zur√ºcksetzen' }
                ],
                'Import/Export': [
                    { name: 'File-Upload Dialog', icon: 'üì§', tooltip: 'Datei-Auswahl und Upload' },
                    { name: 'Export-Format Buttons', icon: 'üìã', tooltip: 'HTML/XML/CSV/JSON Export' },
                    { name: 'Download ZIP Scripts', icon: 'üì¶', tooltip: 'Sammelprogramm Download' },
                    { name: 'Batch-Export alle Formate', icon: 'üéØ', tooltip: 'Alle Formate exportieren' }
                ],
                'Einstellungen': [
                    { name: 'Tab-Navigation Icons', icon: 'üóÇÔ∏è', tooltip: 'Settings-Tabs mit Icons' },
                    { name: 'Theme-Einstellungen', icon: 'üåô', tooltip: 'Dark/Light Theme Toggle' },
                    { name: 'Meldungen Delay Checkbox', icon: '‚è∞', tooltip: 'Toast-Delay Einstellung' },
                    { name: 'Gefahr-Bereich rot', icon: '‚ö†Ô∏è', tooltip: 'Danger-Zone rote Markierung' }
                ],
                'Performance & Responsive': [
                    { name: 'Mobile Layout <768px', icon: 'üì±', tooltip: 'Mobile Ansicht pr√ºfen' },
                    { name: 'Tablet Layout 768-1024px', icon: 'üì≤', tooltip: 'Tablet Ansicht pr√ºfen' },
                    { name: 'Desktop Layout >1024px', icon: 'üñ•Ô∏è', tooltip: 'Desktop Ansicht pr√ºfen' },
                    { name: 'Lazy-Loading gro√üe Listen', icon: '‚ö°', tooltip: 'Performance bei 100+ Bookmarks' }
                ]
            };

            // Alle Tests f√ºr aktuellen Bereich
            const getCurrentTests = () => {
                const baseTests = predefinedTests[currentCategory] || [];
                const categoryDynamicTests = dynamicTests[currentCategory] || [];
                return [...baseTests, ...categoryDynamicTests];
            };

            // Test hinzuf√ºgen
            const addNewTest = () => {
                if (!newTestName.trim()) {
                    showError('Bitte geben Sie einen Testnamen ein');
                    return;
                }

                const existingTests = getCurrentTests();
                if (existingTests.some(test => test.name === newTestName.trim())) {
                    showError('Test mit diesem Namen existiert bereits');
                    return;
                }

                setDynamicTests(prev => ({
                    ...prev,
                    [currentCategory]: [
                        ...(prev[currentCategory] || []),
                        { 
                            name: newTestName.trim(), 
                            icon: 'üîç', 
                            tooltip: 'Benutzerdefinierter Test',
                            isDynamic: true 
                        }
                    ]
                }));

                // Test-Counter in Kategorie aktualisieren
                setTestCategories(prev => prev.map(cat => 
                    cat.name === currentCategory 
                        ? { ...cat, tests: cat.tests + 1 }
                        : cat
                ));

                setNewTestName('');
                setForceRender(prev => prev + 1);
                showSuccess(`Test "${newTestName.trim()}" zu "${currentCategory}" hinzugef√ºgt`);
                console.log(`Test hinzugef√ºgt: ${newTestName.trim()} zu Kategorie: ${currentCategory}`);
            };

            // Test entfernen
            const removeTest = () => {
                if (!newTestName.trim()) {
                    showError('Bitte geben Sie den Namen des zu l√∂schenden Tests ein');
                    return;
                }

                const testToRemove = newTestName.trim();
                const categoryTests = dynamicTests[currentCategory] || [];
                const testExists = categoryTests.some(test => test.name === testToRemove);

                if (!testExists) {
                    showError(`Test "${testToRemove}" nicht gefunden in "${currentCategory}"`);
                    return;
                }

                setDynamicTests(prev => ({
                    ...prev,
                    [currentCategory]: (prev[currentCategory] || []).filter(
                        test => test.name !== testToRemove
                    )
                }));

                // Test-Counter in Kategorie aktualisieren
                setTestCategories(prev => prev.map(cat => 
                    cat.name === currentCategory 
                        ? { ...cat, tests: Math.max(0, cat.tests - 1) }
                        : cat
                ));

                setNewTestName('');
                setForceRender(prev => prev + 1);
                showSuccess(`Test "${testToRemove}" aus "${currentCategory}" entfernt`);
                console.log(`Test entfernt: ${testToRemove} aus Kategorie: ${currentCategory}`);
            };

            // Status setzen
            const setTestStatus = (testName, status) => {
                setTestStatuses(prev => ({
                    ...prev,
                    [testName]: status
                }));
                showSuccess(`Test "${testName}" auf "${status}" gesetzt`);
            };

            // Notiz bearbeiten
            const updateNote = (testName, note) => {
                setTestNotes(prev => ({
                    ...prev,
                    [testName]: note
                }));
            };

            // Status-Filter Funktionen
            const statusCounts = {
                success: Object.values(testStatuses).filter(s => s === 'success').length,
                error: Object.values(testStatuses).filter(s => s === 'error').length,
                warning: Object.values(testStatuses).filter(s => s === 'warning').length,
                info: Object.values(testStatuses).filter(s => s === 'info').length
            };

            // Gefilterte Tests basierend auf Status
            const getFilteredTests = () => {
                const allTests = getCurrentTests();
                if (!statusFilter) return allTests;
                
                return allTests.filter(test => testStatuses[test.name] === statusFilter);
            };

            // Enter-Taste f√ºr Test-Hinzuf√ºgung
            const handleKeyPress = (e) => {
                if (e.key === 'Enter') {
                    addNewTest();
                }
            };

            useEffect(() => {
                const filtered = getFilteredTests();
                setFilteredTests(filtered);
            }, [currentCategory, statusFilter, testStatuses, dynamicTests, forceRender]);

            const closeWindow = () => {
                window.close();
            };

            const goBackToFavOrg = () => {
                if (window.opener) {
                    window.opener.focus();
                    window.close();
                } else {
                    window.location.href = '/';
                }
            };

            return (
                <div className="audit-log-container">
                    <button className="close-btn" onClick={closeWindow}>
                        ‚úï Schlie√üen
                    </button>

                    {/* Header */}
                    <div className="audit-log-header">
                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                            <button className="btn btn-secondary" onClick={goBackToFavOrg}>
                                <Home size={16} />
                                FavOrg
                            </button>
                            <h2 style={{ margin: 0, color: 'var(--accent-cyan)' }}>
                                üîç AuditLog-System - Vollbild
                            </h2>
                        </div>

                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                            <input
                                type="text"
                                className="input"
                                placeholder="Neuer Testname..."
                                value={newTestName}
                                onChange={(e) => setNewTestName(e.target.value)}
                                onKeyPress={handleKeyPress}
                                style={{ width: '200px' }}
                            />
                            <button className="btn btn-primary" onClick={addNewTest}>
                                <Plus size={16} />
                            </button>
                            <button className="btn btn-danger" onClick={removeTest}>
                                ‚úï
                            </button>
                        </div>

                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                            <button 
                                className={`btn ${viewMode === 'bereiche' ? 'btn-primary' : 'btn-secondary'}`}
                                onClick={() => setViewMode('bereiche')}
                            >
                                Bereiche
                            </button>
                            <button 
                                className={`btn ${viewMode === 'tests' ? 'btn-primary' : 'btn-secondary'}`}
                                onClick={() => setViewMode('tests')}
                            >
                                Testpunkte
                            </button>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="audit-log-content">
                        {/* Sidebar - Kategorien */}
                        <div className="audit-sidebar">
                            <h3 style={{ margin: '0 0 16px 0', color: 'var(--accent-cyan)' }}>
                                üìã Test-Bereiche
                            </h3>
                            {testCategories.map((category) => (
                                <button
                                    key={category.name}
                                    className={`category-btn ${currentCategory === category.name ? 'active' : ''}`}
                                    onClick={() => setCurrentCategory(category.name)}
                                >
                                    <span>{category.icon}</span>
                                    <span style={{ flex: 1, textAlign: 'left' }}>{category.name}</span>
                                    <span className="status-badge status-info">{category.tests}</span>
                                </button>
                            ))}
                        </div>

                        {/* Main - Testpunkte */}
                        <div className="audit-main">
                            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '16px' }}>
                                <h3 style={{ margin: 0, color: 'var(--accent-cyan)' }}>
                                    {testCategories.find(cat => cat.name === currentCategory)?.icon} {currentCategory}
                                </h3>
                                <span className="status-badge status-info">
                                    {getFilteredTests().length} Tests
                                </span>
                            </div>

                            <div style={{ display: 'grid', gap: '12px' }}>
                                {getFilteredTests().map((test, index) => {
                                    const testStatus = testStatuses[test.name];
                                    const testNote = testNotes[test.name];
                                    
                                    return (
                                        <div key={`${test.name}-${index}`} className="test-point">
                                            <div className="test-point-header">
                                                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                                                    <span>{test.icon}</span>
                                                    <strong>{test.name}</strong>
                                                    {test.isDynamic && (
                                                        <span className="status-badge" style={{ background: 'var(--accent-cyan)', color: 'white' }}>
                                                            Custom
                                                        </span>
                                                    )}
                                                </div>
                                                {testStatus && (
                                                    <span className={`status-badge status-${testStatus}`}>
                                                        {testStatus === 'success' && '‚úÖ'}
                                                        {testStatus === 'error' && '‚ùå'}
                                                        {testStatus === 'warning' && '‚è≥'}
                                                        {testStatus === 'info' && 'üóëÔ∏è'}
                                                    </span>
                                                )}
                                            </div>
                                            
                                            <p style={{ margin: '4px 0 8px 0', color: 'var(--text-secondary)', fontSize: '13px' }}>
                                                {test.tooltip}
                                            </p>

                                            {testNote && (
                                                <div style={{ 
                                                    background: 'var(--bg-primary)', 
                                                    padding: '8px', 
                                                    borderRadius: '4px', 
                                                    margin: '8px 0',
                                                    fontSize: '13px'
                                                }}>
                                                    üìù {testNote}
                                                </div>
                                            )}

                                            <div className="test-point-actions">
                                                <button 
                                                    className="btn btn-success"
                                                    onClick={() => setTestStatus(test.name, 'success')}
                                                    style={{ padding: '4px 8px', fontSize: '12px' }}
                                                >
                                                    ‚úÖ
                                                </button>
                                                <button 
                                                    className="btn btn-danger"
                                                    onClick={() => setTestStatus(test.name, 'error')}
                                                    style={{ padding: '4px 8px', fontSize: '12px' }}
                                                >
                                                    ‚ùå
                                                </button>
                                                <button 
                                                    className="btn btn-warning"
                                                    onClick={() => setTestStatus(test.name, 'warning')}
                                                    style={{ padding: '4px 8px', fontSize: '12px' }}
                                                >
                                                    ‚è≥
                                                </button>
                                                <button 
                                                    className="btn btn-info"
                                                    onClick={() => setTestStatus(test.name, 'info')}
                                                    style={{ padding: '4px 8px', fontSize: '12px' }}
                                                >
                                                    üóëÔ∏è
                                                </button>
                                                <button 
                                                    className="btn btn-secondary"
                                                    onClick={() => setEditingNote(editingNote === test.name ? null : test.name)}
                                                    style={{ padding: '4px 8px', fontSize: '12px' }}
                                                >
                                                    ‚úèÔ∏è
                                                </button>
                                            </div>

                                            {editingNote === test.name && (
                                                <div style={{ marginTop: '8px' }}>
                                                    <input
                                                        type="text"
                                                        className="input"
                                                        placeholder="Notiz hinzuf√ºgen..."
                                                        value={testNote || ''}
                                                        onChange={(e) => updateNote(test.name, e.target.value)}
                                                        onKeyPress={(e) => {
                                                            if (e.key === 'Enter') {
                                                                setEditingNote(null);
                                                            }
                                                        }}
                                                        style={{ width: '100%', fontSize: '13px' }}
                                                    />
                                                </div>
                                            )}
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>

                    {/* Footer */}
                    <div className="audit-footer">
                        <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>
                            <button 
                                className={`btn ${!statusFilter ? 'btn-primary' : 'btn-secondary'}`}
                                onClick={() => setStatusFilter('')}
                            >
                                Alle ({Object.keys(testStatuses).length})
                            </button>
                            <button 
                                className={`btn btn-success ${statusFilter === 'success' ? 'btn-primary' : ''}`}
                                onClick={() => setStatusFilter(statusFilter === 'success' ? '' : 'success')}
                            >
                                ‚úÖ ({statusCounts.success})
                            </button>
                            <button 
                                className={`btn btn-danger ${statusFilter === 'error' ? 'btn-primary' : ''}`}
                                onClick={() => setStatusFilter(statusFilter === 'error' ? '' : 'error')}
                            >
                                ‚ùå ({statusCounts.error})
                            </button>
                            <button 
                                className={`btn btn-warning ${statusFilter === 'warning' ? 'btn-primary' : ''}`}
                                onClick={() => setStatusFilter(statusFilter === 'warning' ? '' : 'warning')}
                            >
                                ‚è≥ ({statusCounts.warning})
                            </button>
                            <button 
                                className={`btn btn-info ${statusFilter === 'info' ? 'btn-primary' : ''}`}
                                onClick={() => setStatusFilter(statusFilter === 'info' ? '' : 'info')}
                            >
                                üóëÔ∏è ({statusCounts.info})
                            </button>
                        </div>

                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginLeft: 'auto' }}>
                            <button className="btn btn-secondary">
                                üìÅ Archiv
                            </button>
                            <button className="btn btn-secondary">
                                üìÑ Download
                            </button>
                            <button className="btn btn-secondary">
                                üóëÔ∏è Trash
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Toaster Component
        const Toaster = () => {
            return React.createElement('div', { id: 'sonner-toaster' });
        };

        // Main App
        const App = () => {
            return React.createElement(
                React.Fragment,
                null,
                React.createElement(AuditLogStandalone),
                React.createElement(Toaster)
            );
        };

        // Render App
        ReactDOM.render(React.createElement(App), document.getElementById('audit-log-root'));

        // Initialize Sonner if available
        if (window.sonner) {
            // Sonner is available
            console.log('‚úÖ Sonner Toast system loaded successfully');
        } else {
            console.log('‚ö†Ô∏è Sonner Toast system not available, using console fallback');
        }
    </script>
</body>
</html>