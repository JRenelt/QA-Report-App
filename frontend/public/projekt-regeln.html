<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA-Report-App - Projektregeln</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.8;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #667eea;
            margin-bottom: 30px;
            font-size: 2.5em;
            border-bottom: 4px solid #667eea;
            padding-bottom: 15px;
        }

        h2 {
            color: #764ba2;
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid #764ba2;
            padding-bottom: 10px;
        }

        h3 {
            color: #667eea;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        p, li {
            margin-bottom: 10px;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 20px;
        }

        code {
            background: #f4f4f4;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #e83e8c;
            font-size: 0.95em;
        }

        .rule-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-left: 5px solid #2196f3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .warning-box {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 5px solid #ff9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .forbidden-box {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border-left: 5px solid #f44336;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .best-practice-box {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border-left: 5px solid #4caf50;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .emoji {
            font-size: 1.2em;
            margin-right: 8px;
        }

        strong {
            color: #2c3e50;
        }

        a {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
        }

        a:hover {
            text-decoration: underline;
        }

        .toc {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 40px;
        }

        .toc h2 {
            margin-top: 0;
            color: #495057;
            border-bottom: none;
        }

        .toc ul {
            list-style: none;
            margin-left: 0;
        }

        .toc li {
            margin-bottom: 8px;
        }

        .footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
            color: #999;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìò QA-Report-App - Projekt-Regeln und Standards</h1>

        <div class="toc">
            <h2>üìë Inhaltsverzeichnis</h2>
            <ul>
                <li><a href="#ai-agent">ü§ñ AI-Agent Arbeitsregeln</a></li>
                <li><a href="#rollen">üë• Rollen-System</a></li>
                <li><a href="#geschuetzt">üîí Gesch√ºtzte Daten</a></li>
                <li><a href="#entwicklung">üíª Entwicklungsumgebung</a></li>
                <li><a href="#fehler-muster">üêõ Bekannte Fehler-Muster</a></li>
                <li><a href="#test-id">üî¢ Test-ID Format</a></li>
                <li><a href="#datenhaltung">üíæ Datenhaltung</a></li>
                <li><a href="#ui-ux">üé® UI/UX Standards</a></li>
                <li><a href="#backend">üîß Backend-Routen</a></li>
                <li><a href="#cache">üóëÔ∏è Browser-Cache Management</a></li>
                <li><a href="#links">üîó Wichtige Links</a></li>
                <li><a href="#verboten">üö´ Verboten</a></li>
                <li><a href="#best-practices">‚úÖ Best Practices</a></li>
            </ul>
        </div>

        <h2 id="ai-agent">ü§ñ AI-Agent Arbeitsregeln</h2>
        <div class="rule-box">
            <h3>Kritische Arbeitsabl√§ufe f√ºr AI-Agent</h3>
            <ol>
                <li><strong>Erledigte Aufgaben:</strong>
                    <ul>
                        <li>‚ùå NIEMALS erledigte Aufgaben wieder auf "unerledigt" setzen</li>
                        <li>‚úÖ NUR User darf Aufgaben manuell auf "unerledigt" stellen</li>
                        <li>‚úÖ Bei Unsicherheit: User fragen, ob Aufgabe wirklich erledigt ist</li>
                    </ul>
                </li>
                <li><strong>Projektregeln anzeigen:</strong>
                    <ul>
                        <li>‚úÖ Nach JEDER √Ñnderung an PROJEKT_REGELN.md die komplette Datei anzeigen</li>
                        <li>‚úÖ User muss √Ñnderungen sofort sehen k√∂nnen</li>
                    </ul>
                </li>
                <li><strong>Frontend-Kompilierungs-Check:</strong>
                    <ul>
                        <li>‚úÖ Nach JEDER erledigten Aufgabe Frontend-Logs pr√ºfen</li>
                        <li>‚úÖ Command: <code>tail -n 50 /var/log/supervisor/frontend.out.log | grep -i "compiled\|error\|failed"</code></li>
                        <li>‚úÖ Auf "Compiled with problems:" oder andere Fehler pr√ºfen</li>
                        <li>‚úÖ User SOFORT informieren wenn Frontend nicht kompiliert</li>
                        <li>‚úÖ Fehler NICHT ignorieren - Frontend muss immer zug√§nglich sein</li>
                    </ul>
                </li>
            </ol>
        </div>

        <h2 id="rollen">üë• Rollen-System</h2>
        <div class="rule-box">
            <h3>Drei Rollen mit unterschiedlichen Berechtigungen</h3>
            
            <h4>1. SysOp (System-Operator)</h4>
            <ul>
                <li><strong>H√∂chste Rechte</strong> im gesamten System</li>
                <li>Kann ALLE User sehen und verwalten (inkl. Admins)</li>
                <li>Kann Firmen anlegen, bearbeiten, l√∂schen</li>
                <li>Kann User mit Rollen "admin" und "qa_tester" anlegen</li>
                <li>Kann KEINE weiteren SysOps anlegen (nur "jre" existiert)</li>
                <li>Zugriff auf alle Systemfunktionen</li>
                <li><strong>User:</strong> J√∂rg Renelt (jre) bei Firma ID2.de</li>
            </ul>

            <h4>2. Admin (Administrator)</h4>
            <ul>
                <li>Kann Firmen anlegen, bearbeiten, l√∂schen</li>
                <li>Kann User mit Rollen "admin" und "qa_tester" f√ºr alle Firmen anlegen</li>
                <li>Kann KEINE SysOps anlegen oder sehen</li>
                <li>Kann KEINE SysOps bearbeiten oder l√∂schen</li>
                <li>Voller Zugriff auf eigene Firma und alle anderen Firmen (au√üer ID2 SysOp)</li>
            </ul>

            <h4>3. QA-Tester</h4>
            <ul>
                <li>Kann NUR eigenes Profil bearbeiten</li>
                <li>Kann KEINE User anlegen oder l√∂schen</li>
                <li>Sieht NUR sich selbst in der User-Verwaltung</li>
                <li>Kann Tests erstellen, bearbeiten, ausf√ºhren</li>
                <li>Zugriff nur auf eigene Firma</li>
            </ul>
        </div>

        <h2 id="geschuetzt">üîí Gesch√ºtzte Daten</h2>
        <div class="warning-box">
            <h3>REGEL: ID2 GmbH ist die System-Firma und DARF NICHT gel√∂scht werden</h3>
            <ul>
                <li>Bei "Datenbank leeren": Alle Firmen l√∂schen AUSSER ID2</li>
                <li>Papierkorb-Symbol bei ID2 ausblenden</li>
                <li>ID2 muss immer in localStorage vorhanden sein</li>
            </ul>

            <h3>REGEL: SysOp-User "J√∂rg Renelt" DARF NIEMALS gel√∂scht werden</h3>
            <ul>
                <li><strong>Username:</strong> <code>jre</code></li>
                <li><strong>Password:</strong> <code>sysop123</code> (bis auf weiteres, sp√§ter √§ndern empfohlen)</li>
                <li><strong>Firma:</strong> ID2.de</li>
                <li><strong>Rolle:</strong> SysOp (System-Administrator - h√∂chste Rechte)</li>
                <li><strong>Wichtig:</strong> Dieser User ist der einzige System-Administrator und muss IMMER existieren</li>
                <li>Bei "Datenbank leeren": User "jre" MUSS erhalten bleiben</li>
                <li>Papierkorb-Symbol bei diesem User ausblenden</li>
                <li>Kein L√∂schen √ºber UI oder Backend m√∂glich</li>
                <li>Kein Update der Rolle m√∂glich (IMMER sysop bleiben)</li>
            </ul>

            <h3>WARNUNG: Passwort-Anzeige in Klarschrift (User-Management)</h3>
            <ul>
                <li>Passw√∂rter k√∂nnen tempor√§r im Klartext angezeigt werden (Eye/EyeOff Toggle)</li>
                <li>Dies ist ein bewusstes Security-Risk auf Wunsch des Users</li>
                <li>Nur in User-Management Modal verf√ºgbar (Create/Edit)</li>
                <li>Toggle wird beim Schlie√üen des Modals zur√ºckgesetzt</li>
                <li><strong>Hinweis:</strong> In Production-Umgebung sollte dies deaktiviert werden</li>
            </ul>
        </div>

        <h2 id="entwicklung">üíª Entwicklungsumgebung</h2>
        <div class="rule-box">
            <h3>REGEL: User arbeitet mit 3 Browsern f√ºr Testing und Entwicklung</h3>
            <ul>
                <li><strong>Chrome</strong> (prim√§r f√ºr Entwicklung und DevTools)</li>
                <li><strong>Edge</strong> (Cross-Browser Testing)</li>
                <li><strong>Firefox</strong> (Cross-Browser Testing)</li>
                <li><strong>WICHTIG:</strong> Alle Frontend-√Ñnderungen m√ºssen in allen 3 Browsern getestet werden</li>
                <li>Browser-spezifische Probleme (z.B. Cache, Service Workers) m√ºssen in allen 3 Browsern verifiziert werden</li>
            </ul>
        </div>

        <h2 id="fehler-muster">üêõ Bekannte Fehler-Muster</h2>
        <div class="warning-box">
            <h3>1. CloudFront CDN Cache Problem</h3>
            <ul>
                <li><strong>Symptom:</strong> Browser l√§dt alte Version trotz Code-√Ñnderungen und Rebuild</li>
                <li><strong>Ursache:</strong> CDN-Cache wird nicht automatisch bei Code-√Ñnderungen invalidiert</li>
                <li><strong>L√∂sung:</strong> Emergent Support muss CDN-Cache manuell invalidieren</li>
                <li><strong>Workaround:</strong> Rebuild allein reicht NICHT aus - CDN-Cache-Invalidierung erforderlich</li>
                <li><strong>Test ob behoben:</strong> Console pr√ºfen auf "Mixed Content: http://" Fehler - wenn weg, dann behoben</li>
                <li><strong>Support-Kontakt:</strong> support@emergent.sh mit Job-ID und Preview-URL</li>
            </ul>

            <h3>2. JSX-Fragment-Error</h3>
            <ul>
                <li><strong>Symptom:</strong> TypeScript-Fehler "Unexpected token" mit Zeichen wie <code>}`}></code></li>
                <li><strong>Ursache:</strong> Bei Code-Ersetzungen bleiben versehentlich Syntax-Reste stehen</li>
                <li><strong>Pr√§vention:</strong>
                    <ul>
                        <li>Immer die komplette Zeile/Block pr√ºfen nach √Ñnderungen</li>
                        <li>TypeScript-Compiler-Fehler sofort checken</li>
                        <li><code>tail -n 50 /var/log/supervisor/frontend.out.log</code> nach jeder √Ñnderung ausf√ºhren</li>
                    </ul>
                </li>
                <li><strong>L√∂sung:</strong> Fehlerhafte Syntax-Reste manuell entfernen</li>
            </ul>
        </div>

        <h2 id="test-id">üî¢ Test-ID Format</h2>
        <div class="rule-box">
            <h3>REGEL: Anfangsbuchstabe JEDES Wortes im Titel + laufende Nummer (3-stellig)</h3>
            <ul>
                <li><strong>Format:</strong> <code>[BUCHSTABEN][NUMMER]</code> (z.B. LDD001, SLMEP002)</li>
                <li>Sonderzeichen die als Leerzeichen behandelt werden: & / % - + = ( ) [ ] { } < > | \ : ; , . ? ! " ' ` ~ @ # $ ^ * _</li>
                <li>Umlaute bleiben erhalten (√Ñ, √ñ, √ú)</li>
                <li>Laufende Nummer: 3-stellig mit f√ºhrenden Nullen (001, 002, 003, ...)</li>
            </ul>
            <h4>Beispiele:</h4>
            <ul>
                <li>"Logo Darstellung Desktop" ‚Üí <strong>LDD001</strong> (3 W√∂rter + Nr. 001)</li>
                <li>"Navigation Men√º" ‚Üí <strong>NM002</strong> (2 W√∂rter + Nr. 002)</li>
                <li>"Modal √ñffnen & Schlie√üen" ‚Üí <strong>M√ñS003</strong> (& = Leerzeichen, 3 W√∂rter + Nr. 003)</li>
                <li>"User-Verwaltung/Admin" ‚Üí <strong>UVA004</strong> (- und / = Leerzeichen, 3 W√∂rter + Nr. 004)</li>
                <li>"Performance (100% CPU)" ‚Üí <strong>P1C005</strong> (Klammern und % = Leerzeichen, 3 W√∂rter + Nr. 005)</li>
            </ul>
        </div>

        <h2 id="datenhaltung">üíæ Datenhaltung</h2>
        <div class="rule-box">
            <h3>REGEL: Alle Client-seitigen Daten in localStorage</h3>
            <ul>
                <li>Firmen: <code>qa_companies</code></li>
                <li>Projekte: <code>qa_projects</code></li>
                <li>Test-Suites: <code>qa_suites_{projectId}</code></li>
                <li>Test-Cases: <code>qa_cases_{projectId}</code></li>
            </ul>
        </div>

        <h2 id="ui-ux">üé® UI/UX Standards</h2>
        <div class="rule-box">
            <ul>
                <li><strong>Counter-Position:</strong> Oben rechts neben "Projekt-Auswahl" Header</li>
                <li><strong>Dropdown-Breite:</strong> Volle Breite unter dem Header</li>
                <li><strong>Sidebar-Breite:</strong> Dynamisch, mindestens 280px</li>
                <li><strong>Dark Mode:</strong> Alle Komponenten m√ºssen Dark Mode unterst√ºtzen</li>
                <li><strong>Glossar:</strong> Nur f√ºr Admins zug√§nglich (Admin-Bereich)</li>
            </ul>
        </div>

        <h2 id="backend">üîß Backend-Routen</h2>
        <div class="rule-box">
            <h3>REGEL: Alle API-Routen M√úSSEN mit <code>/api</code> beginnen</h3>
            <ul>
                <li>‚úÖ Richtig: <code>/api/admin/clear-database</code></li>
                <li>‚ùå Falsch: <code>/admin/clear-database</code></li>
            </ul>
        </div>

        <h2 id="cache">üóëÔ∏è Browser-Cache Management</h2>
        <div class="rule-box">
            <h3>REGEL: Bei persistenten Problemen trotz Code-√Ñnderungen muss der Browser-Cache geleert werden</h3>
            
            <h4>Methode 1: Cache √ºber F12 (Entwickler-Konsole) leeren</h4>
            <ol>
                <li>F12 dr√ºcken (Entwickler-Tools √∂ffnen)</li>
                <li><strong>Application Tab</strong> w√§hlen</li>
                <li>Links: <strong>"Lokaler Speicher"</strong> erweitern</li>
                <li>Auf <code>https://report-qa-portal.preview.emergentagent.com</code> klicken</li>
                <li>Alle Keys/Eintr√§ge auf der rechten Seite ausw√§hlen</li>
                <li><strong>Delete-Taste</strong> dr√ºcken oder Button "Websitedaten l√∂schen" verwenden</li>
                <li>Optional: <strong>"Service Workers"</strong> ‚Üí Alle "Unregister" klicken</li>
                <li><strong>Seite neu laden</strong> (F5 oder Strg+Shift+R)</li>
            </ol>

            <h4>Methode 2: Cache √ºber Browser-Einstellungen l√∂schen</h4>
            <ol>
                <li><strong>Strg + Shift + Delete</strong> dr√ºcken</li>
                <li><strong>"Bilder und Dateien im Cache"</strong> ausw√§hlen</li>
                <li>Zeitraum: <strong>"Alle Zeit"</strong> oder <strong>"Letzte 24 Stunden"</strong></li>
                <li><strong>"Daten l√∂schen"</strong> klicken</li>
                <li><strong>Hard Refresh:</strong> Strg + Shift + R</li>
            </ol>

            <h4>Wann Cache leeren?</h4>
            <ul>
                <li>Nach gr√∂√üeren Code-√Ñnderungen am Frontend</li>
                <li>Bei "Mixed Content" Fehlern (HTTP vs HTTPS)</li>
                <li>Wenn alte JavaScript-Versionen trotz Rebuild geladen werden</li>
                <li>Bei persistenten "Failed to fetch" Fehlern</li>
                <li>Wenn localStorage-Daten inkonsistent sind</li>
            </ul>
        </div>

        <h2 id="links">üîó Wichtige Links</h2>
        <div class="rule-box">
            <ul>
                <li><strong>System-Analyse:</strong> <a href="https://report-qa-portal.preview.emergentagent.com/system-analyse.html" target="_blank">system-analyse.html</a></li>
                <li><strong>Fehler-Management:</strong> <a href="https://report-qa-portal.preview.emergentagent.com/fehler-management.html" target="_blank">fehler-management.html</a></li>
                <li><strong>Projektregeln:</strong> <a href="https://report-qa-portal.preview.emergentagent.com/projekt-regeln.html" target="_blank">projekt-regeln.html</a> (diese Seite)</li>
            </ul>
        </div>

        <h2 id="verboten">üö´ Verboten</h2>
        <div class="forbidden-box">
            <ol>
                <li>‚ùå Hardcoded Firmen/Projekte au√üer ID2 als Fallback</li>
                <li>‚ùå ID2 GmbH l√∂schen oder umbenennen</li>
                <li>‚ùå URLs oder Ports in .env-Dateien √§ndern</li>
                <li>‚ùå MongoDB ObjectID verwenden (nur UUIDs!)</li>
                <li>‚ùå npm verwenden (nur yarn!)</li>
            </ol>
        </div>

        <h2 id="best-practices">‚úÖ Best Practices</h2>
        <div class="best-practice-box">
            <ol>
                <li>‚úÖ Immer TypeScript-Fehler pr√ºfen vor Build</li>
                <li>‚úÖ localStorage-√Ñnderungen sofort committen</li>
                <li>‚úÖ Console-Logging f√ºr Debugging hinzuf√ºgen</li>
                <li>‚úÖ Error-Messages benutzerfreundlich auf Deutsch</li>
                <li>‚úÖ Best√§tigungs-Dialoge bei kritischen Aktionen</li>
            </ol>
        </div>

        <div class="footer">
            <p><strong>Letzte Aktualisierung:</strong> <span id="last-update"></span></p>
            <p><strong>Version:</strong> 1.0</p>
        </div>
    </div>

    <script>
        // Aktuelles Datum/Zeit anzeigen
        document.getElementById('last-update').textContent = new Date().toLocaleString('de-DE');
    </script>
</body>
</html>
